<!DOCTYPE html>
<html lang="en" xml:lang="en">

<head>
    <meta charset="UTF-8" />
    <title>AI on the edge</title>

    <link rel="stylesheet" href="edit_style.css?v=$COMMIT_HASH"/>
    <link rel="stylesheet" href="firework.css?v=$COMMIT_HASH"/>

    <script type="text/javascript" src="common.js?v=$COMMIT_HASH"></script>
    <script type="text/javascript" src="jquery-3.6.0.min.js?v=$COMMIT_HASH"></script>
    <script type="text/javascript" src="firework.js?v=$COMMIT_HASH"></script>
</head>

<body style="font-family: arial">
    <div id="overlay">
        <div id="overlaytext"></div>
    </div>
	
    <h4>Initial setup aborted!</h4>

    <p>You have <b>aborted</b> the initial setup!</p>
    <p>Once you push the button below, the setup mode will be ended and the device will be automatically restart to regular web interface. 
       Please be aware: The configuration of the device is not or only parly adapted to your needs!<br>
       Configuration can still be adapted / completed using regular web interface.
    </p>

    <p>
        <button class="button" onclick="reboot()">Abort Setup + Reboot</button>
    </p>


    <script type="text/javascript" src="readconfigparam.js?v=$COMMIT_HASH"></script> 
    <script type="text/javascript" src="readconfigcommon.js?v=$COMMIT_HASH"></script> 

    <script type="text/javascript">
   
    function reboot() {
        if (confirm("Do you want to abort the setup mode and switch to regular web interface?")) {
            domainname = getDomainname(); 
            if (!loadConfig(domainname)) {
                firework.launch('Setup mode could not be deactivated! Please try again!', 'danger', 30000);
                return;
            } 
            ParseConfig();	
            param = getConfigParameters();
            param["System"]["SetupMode"]["enabled"] = true;
            param["System"]["SetupMode"]["value1"] = "false";

            WriteConfigININew();
            SaveConfigToServer(domainname);    

            var stringota = getDomainname() + "/reboot";
            parent.location = stringota;
            parent.location.href = stringota;
            parent.location.assign(stringota);
            parent.location.replace(stringota); 
        }
    }

    </script>

</body>
</html>
